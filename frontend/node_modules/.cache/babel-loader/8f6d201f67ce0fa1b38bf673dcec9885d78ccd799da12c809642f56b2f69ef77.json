{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vignesh\\\\Desktop\\\\exa\\\\expense-tracker_fullstack\\\\frontend\\\\src\\\\Components\\\\PieChart\\\\PieChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useGlobalContext } from '../../context/globalContext';\nimport { InnerLayout } from '../../styles/Layouts';\nimport { Pie } from 'react-chartjs-2';\nimport 'chartjs-plugin-datalabels';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const {\n    totalExpenses,\n    incomes,\n    expenses,\n    totalIncome,\n    totalBalance,\n    getIncomes,\n    getExpenses\n  } = useGlobalContext();\n  useEffect(() => {\n    getIncomes();\n    getExpenses();\n  }, []);\n  const getBackgroundColor = index => {\n    const colors = ['red', 'green', 'blue', 'yellow', 'purple', 'orange'];\n    return colors[index % colors.length];\n  };\n  const aggregateData = data => {\n    const categories = [];\n    const amounts = [];\n    const colors = [];\n    data.forEach((item, index) => {\n      const {\n        category,\n        amount\n      } = item;\n      if (categories.includes(category)) {\n        const existingIndex = categories.indexOf(category);\n        amounts[existingIndex] += amount;\n      } else {\n        categories.push(category);\n        amounts.push(amount);\n        colors.push(getBackgroundColor(index));\n      }\n    });\n    return {\n      categories,\n      amounts,\n      colors\n    };\n  };\n  const aggregateIncome = aggregateData(incomes);\n  const aggregateExpenses = aggregateData(expenses);\n  const incomeData = {\n    labels: aggregateIncome.categories,\n    datasets: [{\n      label: 'Income',\n      data: aggregateIncome.amounts,\n      backgroundColor: aggregateIncome.colors\n    }]\n  };\n  const expenseData = {\n    labels: aggregateExpenses.categories,\n    datasets: [{\n      label: 'Expenses',\n      data: aggregateExpenses.amounts,\n      backgroundColor: aggregateExpenses.colors\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(PieChartStyled, {\n    children: [\"\\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(InnerLayout, {\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"All Transactions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stats-con\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-con\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"income-section\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(PieChart, {\n              data: incomeData,\n              title: \"Income\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"expense-section\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(PieChart, {\n              data: expenseData,\n              title: \"Expenses\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), \"\\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), \"\\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"nLrcZFMZ351Dp5neevygbiJyeZo=\", false, function () {\n  return [useGlobalContext];\n});\n_c = Dashboard;\nconst PieChartStyled = styled.div`\n  .stats-con {\n    display: flex;\n    gap: 2rem;\n  }\n\n  .chart-con {\n    display: flex;\n    gap: 2rem;\n    flex-grow: 1;\n  }\n\n  .income-section {\n    flex-basis: 50%;\n    background-color: #f2faf1;\n    border: 2px solid #4caf50;\n  }\n\n  .expense-section {\n    flex-basis: 50%;\n    background-color: #fae3e3;\n    border: 2px solid #f44336;\n  }\n`;\n_c2 = PieChartStyled;\nconst PieChart = _ref => {\n  let {\n    data,\n    title\n  } = _ref;\n  const total = data.datasets[0].data.reduce((a, b) => a + b, 0);\n  const percentageData = data.datasets[0].data.map(value => (value / total * 100).toFixed(2));\n  const updatedData = {\n    ...data,\n    datasets: [{\n      ...data.datasets[0],\n      data: percentageData\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"\\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), \"\\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(Pie, {\n      data: updatedData,\n      options: {\n        plugins: {\n          tooltip: {\n            callbacks: {\n              label: context => {\n                const label = data.labels[context.dataIndex];\n                const value = data.datasets[0].data[context.dataIndex];\n                const percentage = percentageData[context.dataIndex];\n                return `${label}: ${value} (${percentage}%)`;\n              }\n            }\n          },\n          legend: {\n            display: true,\n            position: 'bottom'\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), \"\\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n};\n_c3 = PieChart;\nexport default Dashboard;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Dashboard\");\n$RefreshReg$(_c2, \"PieChartStyled\");\n$RefreshReg$(_c3, \"PieChart\");","map":{"version":3,"names":["React","useEffect","styled","useGlobalContext","InnerLayout","Pie","Dashboard","totalExpenses","incomes","expenses","totalIncome","totalBalance","getIncomes","getExpenses","getBackgroundColor","index","colors","length","aggregateData","data","categories","amounts","forEach","item","category","amount","includes","existingIndex","indexOf","push","aggregateIncome","aggregateExpenses","incomeData","labels","datasets","label","backgroundColor","expenseData","PieChartStyled","div","PieChart","title","total","reduce","a","b","percentageData","map","value","toFixed","updatedData","plugins","tooltip","callbacks","context","dataIndex","percentage","legend","display","position"],"sources":["C:/Users/vignesh/Desktop/exa/expense-tracker_fullstack/frontend/src/Components/PieChart/PieChart.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useGlobalContext } from '../../context/globalContext';\r\nimport { InnerLayout } from '../../styles/Layouts';\r\nimport { Pie } from 'react-chartjs-2';\r\nimport 'chartjs-plugin-datalabels';\r\n\r\nfunction Dashboard() {\r\n  const {\r\n    totalExpenses,\r\n    incomes,\r\n    expenses,\r\n    totalIncome,\r\n    totalBalance,\r\n    getIncomes,\r\n    getExpenses,\r\n  } = useGlobalContext();\r\n\r\n  useEffect(() => {\r\n    getIncomes();\r\n    getExpenses();\r\n  }, []);\r\n\r\n  const getBackgroundColor = (index) => {\r\n    const colors = ['red', 'green', 'blue', 'yellow', 'purple', 'orange'];\r\n    return colors[index % colors.length];\r\n  };\r\n\r\n  const aggregateData = (data) => {\r\n    const categories = [];\r\n    const amounts = [];\r\n    const colors = [];\r\n\r\n    data.forEach((item, index) => {\r\n      const { category, amount } = item;\r\n\r\n      if (categories.includes(category)) {\r\n        const existingIndex = categories.indexOf(category);\r\n        amounts[existingIndex] += amount;\r\n      } else {\r\n        categories.push(category);\r\n        amounts.push(amount);\r\n        colors.push(getBackgroundColor(index));\r\n      }\r\n    });\r\n\r\n    return { categories, amounts, colors };\r\n  };\r\n\r\n  const aggregateIncome = aggregateData(incomes);\r\n  const aggregateExpenses = aggregateData(expenses);\r\n\r\n  const incomeData = {\r\n    labels: aggregateIncome.categories,\r\n    datasets: [\r\n      {\r\n        label: 'Income',\r\n        data: aggregateIncome.amounts,\r\n        backgroundColor: aggregateIncome.colors,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const expenseData = {\r\n    labels: aggregateExpenses.categories,\r\n    datasets: [\r\n      {\r\n        label: 'Expenses',\r\n        data: aggregateExpenses.amounts,\r\n        backgroundColor: aggregateExpenses.colors,\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <PieChartStyled>\r\n      <InnerLayout>\r\n        <h1>All Transactions</h1>\r\n        <div className=\"stats-con\">\r\n          <div className=\"chart-con\">\r\n            <div className=\"income-section\">\r\n              <PieChart data={incomeData} title=\"Income\" />\r\n            </div>\r\n            <div className=\"expense-section\">\r\n              <PieChart data={expenseData} title=\"Expenses\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </InnerLayout>\r\n    </PieChartStyled>\r\n  );\r\n}\r\n\r\nconst PieChartStyled = styled.div`\r\n  .stats-con {\r\n    display: flex;\r\n    gap: 2rem;\r\n  }\r\n\r\n  .chart-con {\r\n    display: flex;\r\n    gap: 2rem;\r\n    flex-grow: 1;\r\n  }\r\n\r\n  .income-section {\r\n    flex-basis: 50%;\r\n    background-color: #f2faf1;\r\n    border: 2px solid #4caf50;\r\n  }\r\n\r\n  .expense-section {\r\n    flex-basis: 50%;\r\n    background-color: #fae3e3;\r\n    border: 2px solid #f44336;\r\n  }\r\n`;\r\n\r\nconst PieChart = ({ data, title }) => {\r\n  const total = data.datasets[0].data.reduce((a, b) => a + b, 0);\r\n  const percentageData = data.datasets[0].data.map((value) =>\r\n    ((value / total) * 100).toFixed(2)\r\n  );\r\n\r\n  const updatedData = {\r\n    ...data,\r\n    datasets: [\r\n      {\r\n        ...data.datasets[0],\r\n        data: percentageData,\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>{title}</h2>\r\n      <Pie\r\n        data={updatedData}\r\n        options={{\r\n          plugins: {\r\n            tooltip: {\r\n              callbacks: {\r\n                label: (context) => {\r\n                  const label = data.labels[context.dataIndex];\r\n                  const value = data.datasets[0].data[context.dataIndex];\r\n                  const percentage = percentageData[context.dataIndex];\r\n                  return `${label}: ${value} (${percentage}%)`;\r\n                },\r\n              },\r\n            },\r\n            legend: {\r\n              display: true,\r\n              position: 'bottom',\r\n            },\r\n          },\r\n        }\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,gBAAgB,QAAQ,6BAA6B;AAC9D,SAASC,WAAW,QAAQ,sBAAsB;AAClD,SAASC,GAAG,QAAQ,iBAAiB;AACrC,OAAO,2BAA2B;AAAC;AAEnC,SAASC,SAAS,GAAG;EAAA;EACnB,MAAM;IACJC,aAAa;IACbC,OAAO;IACPC,QAAQ;IACRC,WAAW;IACXC,YAAY;IACZC,UAAU;IACVC;EACF,CAAC,GAAGV,gBAAgB,EAAE;EAEtBF,SAAS,CAAC,MAAM;IACdW,UAAU,EAAE;IACZC,WAAW,EAAE;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,kBAAkB,GAAIC,KAAK,IAAK;IACpC,MAAMC,MAAM,GAAG,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC;IACrE,OAAOA,MAAM,CAACD,KAAK,GAAGC,MAAM,CAACC,MAAM,CAAC;EACtC,CAAC;EAED,MAAMC,aAAa,GAAIC,IAAI,IAAK;IAC9B,MAAMC,UAAU,GAAG,EAAE;IACrB,MAAMC,OAAO,GAAG,EAAE;IAClB,MAAML,MAAM,GAAG,EAAE;IAEjBG,IAAI,CAACG,OAAO,CAAC,CAACC,IAAI,EAAER,KAAK,KAAK;MAC5B,MAAM;QAAES,QAAQ;QAAEC;MAAO,CAAC,GAAGF,IAAI;MAEjC,IAAIH,UAAU,CAACM,QAAQ,CAACF,QAAQ,CAAC,EAAE;QACjC,MAAMG,aAAa,GAAGP,UAAU,CAACQ,OAAO,CAACJ,QAAQ,CAAC;QAClDH,OAAO,CAACM,aAAa,CAAC,IAAIF,MAAM;MAClC,CAAC,MAAM;QACLL,UAAU,CAACS,IAAI,CAACL,QAAQ,CAAC;QACzBH,OAAO,CAACQ,IAAI,CAACJ,MAAM,CAAC;QACpBT,MAAM,CAACa,IAAI,CAACf,kBAAkB,CAACC,KAAK,CAAC,CAAC;MACxC;IACF,CAAC,CAAC;IAEF,OAAO;MAAEK,UAAU;MAAEC,OAAO;MAAEL;IAAO,CAAC;EACxC,CAAC;EAED,MAAMc,eAAe,GAAGZ,aAAa,CAACV,OAAO,CAAC;EAC9C,MAAMuB,iBAAiB,GAAGb,aAAa,CAACT,QAAQ,CAAC;EAEjD,MAAMuB,UAAU,GAAG;IACjBC,MAAM,EAAEH,eAAe,CAACV,UAAU;IAClCc,QAAQ,EAAE,CACR;MACEC,KAAK,EAAE,QAAQ;MACfhB,IAAI,EAAEW,eAAe,CAACT,OAAO;MAC7Be,eAAe,EAAEN,eAAe,CAACd;IACnC,CAAC;EAEL,CAAC;EAED,MAAMqB,WAAW,GAAG;IAClBJ,MAAM,EAAEF,iBAAiB,CAACX,UAAU;IACpCc,QAAQ,EAAE,CACR;MACEC,KAAK,EAAE,UAAU;MACjBhB,IAAI,EAAEY,iBAAiB,CAACV,OAAO;MAC/Be,eAAe,EAAEL,iBAAiB,CAACf;IACrC,CAAC;EAEL,CAAC;EAED,oBACE,QAAC,cAAc;IAAA,WAAC,iBACd,uBAAC,WAAW;MAAA,WAAC,sBACX;QAAA,UAAI;MAAgB;QAAA;QAAA;QAAA;MAAA,QAAK,wBACzB;QAAK,SAAS,EAAC,WAAW;QAAA,WAAC,2BACzB;UAAK,SAAS,EAAC,WAAW;UAAA,WAAC,gCACzB;YAAK,SAAS,EAAC,gBAAgB;YAAA,WAAC,qCAC9B,uBAAC,QAAQ;cAAC,IAAI,EAAEgB,UAAW;cAAC,KAAK,EAAC;YAAQ;cAAA;cAAA;cAAA;YAAA,QAAG,kCAC/C;UAAA;YAAA;YAAA;YAAA;UAAA,QAAM,kCACN;YAAK,SAAS,EAAC,iBAAiB;YAAA,WAAC,qCAC/B,uBAAC,QAAQ;cAAC,IAAI,EAAEK,WAAY;cAAC,KAAK,EAAC;YAAU;cAAA;cAAA;cAAA;YAAA,QAAG,kCAClD;UAAA;YAAA;YAAA;YAAA;UAAA,QAAM,6BACR;QAAA;UAAA;UAAA;UAAA;QAAA,QAAM,wBACR;MAAA;QAAA;QAAA;QAAA;MAAA,QAAM,mBACR;IAAA;MAAA;MAAA;MAAA;IAAA,QAAc,cAChB;EAAA;IAAA;IAAA;IAAA;EAAA,QAAiB;AAErB;AAAC,GApFQ/B,SAAS;EAAA,QASZH,gBAAgB;AAAA;AAAA,KATbG,SAAS;AAsFlB,MAAMgC,cAAc,GAAGpC,MAAM,CAACqC,GAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC,MAvBID,cAAc;AAyBpB,MAAME,QAAQ,GAAG,QAAqB;EAAA,IAApB;IAAErB,IAAI;IAAEsB;EAAM,CAAC;EAC/B,MAAMC,KAAK,GAAGvB,IAAI,CAACe,QAAQ,CAAC,CAAC,CAAC,CAACf,IAAI,CAACwB,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC;EAC9D,MAAMC,cAAc,GAAG3B,IAAI,CAACe,QAAQ,CAAC,CAAC,CAAC,CAACf,IAAI,CAAC4B,GAAG,CAAEC,KAAK,IACrD,CAAEA,KAAK,GAAGN,KAAK,GAAI,GAAG,EAAEO,OAAO,CAAC,CAAC,CAAC,CACnC;EAED,MAAMC,WAAW,GAAG;IAClB,GAAG/B,IAAI;IACPe,QAAQ,EAAE,CACR;MACE,GAAGf,IAAI,CAACe,QAAQ,CAAC,CAAC,CAAC;MACnBf,IAAI,EAAE2B;IACR,CAAC;EAEL,CAAC;EAED,oBACE;IAAA,WAAK,iBACH;MAAA,UAAKL;IAAK;MAAA;MAAA;MAAA;IAAA,QAAM,mBAChB,uBAAC,GAAG;MACF,IAAI,EAAES,WAAY;MAClB,OAAO,EAAE;QACPC,OAAO,EAAE;UACPC,OAAO,EAAE;YACPC,SAAS,EAAE;cACTlB,KAAK,EAAGmB,OAAO,IAAK;gBAClB,MAAMnB,KAAK,GAAGhB,IAAI,CAACc,MAAM,CAACqB,OAAO,CAACC,SAAS,CAAC;gBAC5C,MAAMP,KAAK,GAAG7B,IAAI,CAACe,QAAQ,CAAC,CAAC,CAAC,CAACf,IAAI,CAACmC,OAAO,CAACC,SAAS,CAAC;gBACtD,MAAMC,UAAU,GAAGV,cAAc,CAACQ,OAAO,CAACC,SAAS,CAAC;gBACpD,OAAQ,GAAEpB,KAAM,KAAIa,KAAM,KAAIQ,UAAW,IAAG;cAC9C;YACF;UACF,CAAC;UACDC,MAAM,EAAE;YACNC,OAAO,EAAE,IAAI;YACbC,QAAQ,EAAE;UACZ;QACF;MACF;IACC;MAAA;MAAA;MAAA;IAAA,QACD,cACJ;EAAA;IAAA;IAAA;IAAA;EAAA,QAAM;AAEV,CAAC;AAAC,MA3CInB,QAAQ;AA6Cd,eAAelC,SAAS;AAAC;AAAA;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}